<div class="row d-flex justify-content-center">
    <div class="col-md-6">
    <p>Please select a photo header for your goal.</p>
    <form method="POST" action="/goals/<%= goal.id %>">
          <input type="text" class="form-control shadow-sm" name="photoSearch" placeholder="Search 'workout'">
          <button class="btn btn-primary my-3" name="search">Search</button>
          <a href="/goals/<%= goal.id %>?search=dog" class="">Search</a>
    </div>
    </div>
    <div class="container text-center bg-secondary bg-gradient">
      <% photo.forEach(photo => { %>
        <label class="m-1">
          <input type="radio" id="<%= photo.id %>" name="images" value="<%= photo.urls.regular %>">
              <img src="<%= photo.urls.regular %>&fm=jpg&w=200&fit=max&h=150" id="<%= photo.id %>>" class="images" alt="<%= photo.description %>" class="img-thumbnail">
        </label>
      <% }) %>
      <button type="submit" class="btn btn-primary my-3">Select Photo</button>
    </div>
  </form>
</div>



<script>

  //FETCH to my server for info from backend, which will prevent page from refreshing
  console.log('script is running')
  const searchPhoto = document.querySelector('.photoSearch')
  const searchInput = document.querySelector('#searchInput')
  const imageResults = document.querySelector('.imgResults')
  const photoSelect = document.querySelector('.photoSelect')

  searchPhoto.addEventListener('click', async function () {
      const response = await fetch(`/api/${searchInput.value}`)
      const data = await response.json()
      // console.log(imageResults)
      let htmlString = ""
      data.forEach(photo=> { 
          htmlString += `<label class=\"m-1\">
              <input type=\"radio\" id=\"${photo.id}" name=\"images\" value=\"${photo.urls.regular}\" class=\"hideRadio\">
              <img src=\"${photo.urls.regular}&fm=jpg&w=200&fit=max&h=150\"
                  id=\"${photo.id} \" class=\"images img-thumbnail\" alt=\"${photo.alt_description}\">
          </label>`
          })
          console.log(htmlString)
          imageResults.innerHTML = htmlString
          // console.log(htmlString)
  })

  photoSelect.addEventListener('click', async function () {
      console.log('I\'m clicked')
      //grab elements, get data.id to identify photo id
      const searchInput = document.querySelector('#searchInput')
      const response = await fetch(`/api/${searchInput.value}`)
      const data = await response.json()
      // console.log(data)
      //grab the radio elements
      const checkedImage = document.querySelectorAll('img')
      console.log(checkedImage)
      // if()
  })

</script>